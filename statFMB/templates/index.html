<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head;
         any other head content must come *after* these tags -->
    <title>Estatísticas FMB</title>

    <!-- Bootstrap -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of
         HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script
        src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script
        src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <header>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed"
                    data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="">Fundação Mata do Bussaco</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="/">Estatísticas</a></li>
            <li><a href="charts">Gráficos</a></li>
            <li><a href="upload">Carregar</a></li>
            <li><a href="FILE TO DOWNLOAD" download="FILE_NAME">Exportar</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
  </header>
  <body>
      <div class="container">
          <div class="page-header">
              <br>
              <h1>Entradas   <small>Fundação Mata do Bussaco</small></h1>
          </div>

          <form class="form-inline text-center" method="POST" action="/">
              <div class="form-group">
                  <label for="data_inicio">Data de Inicio</label>
                  <input type="date" class="form-control" name="lower_date"
                         value ={{ lower_date }}>
              </div>
              <div class="form-group">
                  <label for="data_fim">Data de Fim</label>
                  <input type="date" class="form-control" name="upper_date"
                         value ={{ upper_date }}>
              </div>
              <div class="form-group">
                  <label for="data_fim">Porta</label>
                  <select class="form-control" name="gate"
                          value={{ gate }}>
                      <option value="4">Todas</option>
                      <option value="1">Ameias</option>
                      <option value="2">Serpa</option>
                      <option value="3">Rainha</option>
                  </select>
              </div>
              <div class="form-group">
                  <label for="data_fim">Período:</label>
                  <select class="form-control" name="period">
                      <option>Totais</option>
                      <option>Diário</option>
                      <option>Semanal</option>
                      <option>Mensal</option>
                      <option>Anual</option>
                  </select>
              </div>
              <button type="submit" class="btn btn-primary">Pesquisar</button>
          </form>

          {% if date_warning %}
          <div class="alert alert-danger" role="alert">
              <p><b>Erro,</b>
                  data de inicio tem de ser anterior à data de fim!
              </p>
          </div>
          {% endif %}

          <br>
          <div class="container">
              <div class="row">
                  <div class="col-md-4">
                      <h4> entradas de: {{ lower_date }} a:
                                        {{ upper_date }}</h4>
                  </div>
                  <div class="col-md-2">
                      <h4>Porta: {{ gate }}</h4>
                  </div>
                  <div class="col-md-2">
                      <h4>Viaturas: {{ sum_vehicles }}</h4>
                  </div>
                  <div class="col-md-2">
                      <h4>Passageiros: {{ sum_passengers }}</h4>
                  </div>
                  <div class="col-md-2">
                      <h4>Peões: {{ sum_pedestrians }}</h4>
                  </div>
              </div>
          </div>
          <div class="container">
              <div class ="row">
                  <div class ="col-md-12">
                      <table class="table table-striped table-bordered
                                    table-hover">
                          <thead>
                              <tr class="info">
                                  <th>#</th>
                                  <th>Período</th>
                                  <th>Viaturas</th>
                                  <th>Ligeiros</th>
                                  <th>Ligeiros >5</th>
                                  <th>Caravanas</th>
                                  <th>Autocarros</th>
                                  <th>Motos</th>
                                  <th>Bicicletas</th>
                                  <th>Passageiros</th>
                                  <th>Peões</th>
                              </tr>
                          </thead>
                          <tbody>
                              {% for period in period_list %}
                              <tr>
                                  <td scope="row"></td>
                                  <td>{{ period }}</td>
                                  <td>{{ period_list[period][10] }}</td>
                                  <td>{{ period_list[period][4] }}</td>
                                  <td>{{ period_list[period][5] }}</td>
                                  <td>{{ period_list[period][6] }}</td>
                                  <td>{{ period_list[period][7] }}</td>
                                  <td>{{ period_list[period][3] }}</td>
                                  <td>{{ period_list[period][2] }}</td>
                                  <td>{{ period_list[period][9] }}</td>
                                  <td>{{ period_list[period][1] }}</td>
                              </tr>
                              {% endfor %}
                              {% if period_list_totals %}
                              <tr class="info">
                                  <td scope="row">T</td>
                                  <td>Diário</td>
                                  <td>{{ period_list_totals[10] }}</td>
                                  <td>{{ period_list_totals[4] }}</td>
                                  <td>{{ period_list_totals[5] }}</td>
                                  <td>{{ period_list_totals[6] }}</td>
                                  <td>{{ period_list_totals[7] }}</td>
                                  <td>{{ period_list_totals[3] }}</td>
                                  <td>{{ period_list_totals[2] }}</td>
                                  <td>{{ period_list_totals[9] }}</td>
                                  <td>{{ period_list_totals[1] }}</td>
                              </tr>
                              {% endif %}
                          </tbody>
                      </table>
                  </div>
              </div>
          </div>
          <br>
          <div class="container">
              <div class="row">
                  <div class="col-md-3">
                  </div>
                  <div class="col-md-3">
                      <ul class="list-group">
                          <li class="list-group-item list-group-item-info">
                              <h4>Top Portas</h4>
                          </li>
                          {% if top_gates %}
                             {% for key, value in top_gates.items() %}
                                <li class="list-group-item">
                                    <span class="badge">{{ value }}</span>
                                    {{ key }}
                                </li>
                             {% endfor %}
                          {% endif %}
                      </ul>
                  </div>
                  <div class="col-md-3">
                      <ul class="list-group">
                          <li class="list-group-item list-group-item-info">
                              <h4>Top Paises</h4>
                          </li>
                          {% if top_countries %}
                             {% for entry in top_countries %}
                                <li class="list-group-item">
                                    <span class="badge">{{ entry[1] }}</span>
                                    {{ entry[0] }}
                                </li>
                             {% endfor %}
                          {% endif %}
                      </ul>
                  </div>
                  <div class="col-md-3">
                      <ul class="list-group">
                          <li class="list-group-item list-group-item-info">
                              <h4>Top Concelhos</h4>
                          </li>
                          {% if top_municipalities %}
                             {% for entry in top_municipalities%}
                                <li class="list-group-item">
                                    <span class="badge">{{ entry[1] }}</span>
                                    {{ entry[0] }}
                                </li>
                             {% endfor %}
                          {% endif %}
                      </ul>
                  </div>
              </div>
          </div>




          <form method="POST" enctype="multipart/form-data" action="/upload">
              <div class="form-group">
                  <div class="form-group">
                      <input type="file" name="file[]" multiple="">
                  </div>
                  <button type="submit" value="upload" class="btn btn-default">Submit</button>
              </div>
          </form>





      </div>

      <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
      <scriptsrc="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
          <!-- Include all compiled plugins (below),
               or include individual files as needed -->
          <script src="/static/js/bootstrap.min.js"></script>
  </body>
</html>
